# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Home Assistant —á–µ—Ä–µ–∑ API
–ü–ª–∞–≥–∏–Ω –¥–ª—è [–ò—Ä–∏–Ω—ã, –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞](https://github.com/janvarev/Irene-Voice-Assistant). –ù–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –Ω–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∏ –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å!!!
–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–µ—Ç –Ω–∞ –≤–µ—Ä—Å–∏–∏ –æ—Ç [AlexeyBond] (https://github.com/AlexeyBond/Irene-Voice-Assistant)
–Ø–≤–ª—è–µ—Ç—Å—è –ø–æ —Å—É—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º –∏ –¥–æ–ø–æ–ª–Ω–µ–Ω—ã–º –ø–ª–∞–≥–∏–Ω–æ–º –æ—Ç [izverev] (https://github.com/izverev/IreneVA-hassio-script-trigger-plugin)

–î–∞–Ω–Ω—ã–π –ø–ª–∞–≥–∏–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –∏–∑ –ò—Ä–∏–Ω—ã –≥–æ–ª–æ—Å–æ–º —Å–∫—Ä–∏–ø—Ç—ã, —É–ø—Ä–∞–≤–ª—è—Ç—å –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—è–º–∏ –∏ –æ–∑–≤—É—á–∏–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å –¥–∞—Ç—á–∏–∫–æ–≤ Home Assistant.

–ó–∞–ø—Ä–æ—Å—ã –¥–µ–ª–∞—é—Ç—Å—è –ø–æ [REST API](https://developers.home-assistant.io/docs/api/rest/), –±–ª–∞–≥–æ–¥–∞—Ä—è —á–µ–º—É –æ—Ç–ø–∞–¥–∞–µ—Ç –Ω–∞–¥–æ–±–Ω–æ—Å—Ç—å –≤ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∏ –ò—Ä–∏–Ω—ã, –∏ HA.

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å –≤–µ—Ä—Å–∏–µ–π Home Assistant 2025.1.1 –∏ –≤–µ—Ä—Å–∏–µ–π –ò—Ä–∏–Ω—ã –æ—Ç AlexeyBond 0.9.1

## –ù–æ–≤—à–µ—Å—Ç–≤–∞ –≤ –ø–ª–∞–≥–∏–Ω–µ
–û—Ç–ª–∏—á–∏—è –ø–ª–∞–≥–∏–Ω–∞ –æ—Ç –ø—Ä–∞—Ä–æ–¥–∏—Ç–µ–ª—è:
1. –ò—Å–ø—Ä–∞–≤–∏–ª —Ä–∞–±–æ—Ç—É —Å–∫—Ä–∏–ø—Ç–æ–≤ (–Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏ —Å–æ–≤—Å–µ–º)
2. –ò–∑–º–µ–Ω–∏–ª "–Ω–æ—Ä–º–∞–ª—å–∑–∞—Ç–æ—Ä" –Ω–∞ pymorphy2 (—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ 3-5 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ)
3. –°–¥–µ–ª–∞–ª, —á—Ç–æ –±–µ—Ä—É—Ç—Å—è –≤ —Ä–∞–±–æ—Ç—É —Ç–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç—ã –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª `totem`. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Å–∏–º–≤–æ–ª "üé§"
4. –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ HA - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤ –∫–æ–Ω—Å–æ–ª–∏ –∏–º–µ–Ω–∞, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –º–æ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å. (—Ö–æ—Ç–µ–ª —Å–¥–µ–ª–∞—Ç—å, —á—Ç–æ–±—ã –º–æ–≥ –æ–∑–≤—É—á–∏–≤–∞—Ç—å, –Ω–æ —Ç–æ–≥–¥–∞ –±—É–¥–µ—Ç –∫—Ä–∏–≤–æ –∏–∑-–∑–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ)
5. –ò—Å–ø—Ä–∞–≤–∏–ª –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É –≤—ã–±–æ—Ä–∞ —Ñ–æ—Ä–º—ã —Å–ª–æ–≤–∞ –æ—Ç —á–∏—Å–ª–∞ (–≥—Ä–∞–¥—É—Å—ã, –ø—Ä–æ—Ü–µ–Ω—Ç—ã)

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–ª–∞–≥–∏–Ω
1. –°–∫–∞—á–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–æ–ª–æ–∂–∏—Ç–µ –ø–∞–ø–∫—É plugins –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º –ò—Ä–∏–Ω—ã (–∏–ª–∏ –≤ embedded_plugins)
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ò—Ä–∏–Ω—É –≤–º–µ—Å—Ç–µ —Å –ø–ª–∞–≥–∏–Ω–æ–º –æ–¥–∏–Ω —Ä–∞–∑ –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –ø–∞–ø–∫–µ `options` –ø–æ—è–≤–∏–ª—Å—è —Ñ–∞–π–ª `plugin_hassio_script_trigger.json` (plugin_hassio_script_trigger.yaml)
3. –ü–æ–ª—É—á–∏—Ç–µ "–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞" / [long lived access token](https://developers.home-assistant.io/docs/auth_api/#long-lived-access-token) –≤ —Å–≤–æ—ë–º –ø—Ä–æ—Ñ–∏–ª–µ –≤ Home Assistant
4. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `plugin_hassio_script_trigger.json` –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
5. –ó–∞–º–µ–Ω–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞–ø—Ä–æ—Ç–∏–≤ `hassio_url` –Ω–∞ —Å—Å—ã–ª–∫—É –≤–∞—à–µ–≥–æ Home Assistant, –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ - –≤ –∫–æ–Ω—Ü–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–∏–º–≤–æ–ª `/`
6. –í–ø–∏—à–∏—Ç–µ –≤–∞—à —Ç–æ–∫–µ–Ω –∏–∑ –ø—É–Ω–∫—Ç–∞ 2 –Ω–∞–ø—Ä–æ—Ç–∏–≤ `hassio_key`
7. –ü–æ –∂–µ–ª–∞–Ω–∏—é –∏–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–º–µ—Ç—Ä `totem`. –≠—Ç–æ—Ç —Å–∏–º–≤–æ–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å—Å—è –≤–æ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–∞—Ö HA, —á—Ç–æ–±—ã –æ–Ω–∏ –ø–æ—è–≤–∏–ª–∏—Å—å –≤ –ò—Ä–∏–Ω–µ. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Å–∏–º–≤–æ–ª "üé§"
8. –í –ø–ª–∞–≥–∏–Ω–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ pymorphy2, –æ–Ω–∞ –ø—Ä–∏–≤–æ–¥–∏—Ç —Å–ª–æ–≤–∞ –≤ –Ω–æ—Ä–º–∞–ª—å–Ω—É—é —Å–ª–æ–≤–æ—Ñ–æ—Ä–º—É (–ª–∞–º–ø—É-> –ª–∞–º–ø–∞) 
–¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –æ–Ω–∞ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∞ –Ω–∞–¥–æ –µ—ë –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥–æ–π `pip install pymorphy2`

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Ç–∏–ø–∞ `switch` –∏ `sensor` ('battery', 'temperature', 'humidity') 

## –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã
- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–∞–≥–∏–Ω–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è –≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã, —É —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∏—Ö friendly name, –¥–∞–ª—å–Ω–µ–π—à–∏–π –ø–æ–∏—Å–∫ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø–æ —ç—Ç–æ–º—É –∏–º–µ–Ω–∏
- –í —Å–ø–∏—Å–∫–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø–ª–∞–≥–∏–Ω –∏—â–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Ñ—Ä–∞–∑—ã –∏ –∞–ª–∏–∞—Å–∞ –∏–ª–∏ friendly name —Å–∫—Ä–∏–ø—Ç–∞ –∏–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (HA –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–∞–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞–º –Ω–∞ –∫–∏—Ä–∏–ª–ª–∏—Ü–µ).
- –ï—Å–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏–ª–∏ —Å–∫—Ä–∏–ø—Ç –Ω–∞—à—ë–ª—Å—è - –¥–µ–ª–∞–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –Ω–∞ –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ "ID –æ–±—ä–µ–∫—Ç–∞"
- –ï—Å–ª–∏ –≤ —Å–∫—Ä–∏–ø—Ç–µ —É–∫–∞–∑–∞–Ω —Ç–µ–∫—Å—Ç –∏–∑ –æ–ø–∏—Å–∞–Ω–∏—è –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ `ttsreply(—Ç–µ–∫—Å—Ç)` - –ò—Ä–∏–Ω–∞ –æ–∑–≤—É—á–∏—Ç –µ–≥–æ (–¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ–ø–∏—Å–∞–Ω–∏—è –∫ —Å–∫—Ä–∏–ø—Ç—É –ø—Ä–∏–¥–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä)

## –ü—Ä–∏–º–µ—Ä—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –≤–∫–ª—é—á–∏ –ª–∞–º–ø–æ—á–∫–∏
>–≤–∫–ª—é—á–∞–µ—Ç—Å—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å –∏–º–µ–Ω–µ–º –ª–∞–º–ø–æ—á–∫–∏ 
- –≤—ã–∫–ª—é—á–∏ –ª–∞–º–ø–æ—á–∫–∏
> —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ "–ª–∞–º–ø–æ—á–∫–∏" –≤—ã–∫–ª—é—á–∞—é—Ç—Å—è
- –∫–∞–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –∫–æ–º–Ω–∞—Ç–µ
>–ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å–µ–Ω—Å–æ—Ä —Å –∏–º–µ–Ω–µ–º `—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –∫–æ–º–Ω–∞—Ç–µ` –∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ—Ç–≤–µ—Ç: `—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –∫–æ–º–Ω–∞—Ç–µ 30 –≥—Ä–∞–¥—É—Å–æ–≤`
- –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
>–ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤, —ç—Ç–æ —É–¥–æ–±–Ω–æ, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å –ò—Ä–∏–Ω—É –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

## –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–∫—Ä–∏–ø—Ç–æ–≤
1. –í—ã –≥–æ–≤–æ—Ä–∏—Ç–µ "–∏—Ä–∏–Ω–∞ —Ö–æ—á—É —Å–ø–∞—Ç—å"
>–°–∫—Ä–∏–ø—Ç –≤—ã–∫–ª—é—á–∞–µ—Ç –≤–µ—Å—å —Å–≤–µ—Ç, –≤ —Å–ø–∞–ª—å–Ω–µ –≤–∫–ª—é—á–∞–µ—Ç –Ω–æ—á–Ω–∏–∫ –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–º—Ñ–æ—Ä—Ç–Ω—É—é —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É, –∂–∞–ª—é–∑–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è, –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –∂–µ–ª–∞–µ—Ç –≤–∞–º –ø—Ä–∏—è—Ç–Ω—ã—Ö —Å–Ω–æ–≤

2. –í—ã –≥–æ–≤–æ—Ä–∏—Ç–µ "–∏—Ä–∏–Ω–∞ —è –±—É–¥—É —Å–æ–±–∏—Ä–∞—Ç—å—Å—è –Ω–∞ —Ä–∞–±–æ—Ç—É"
>–°–∫—Ä–∏–ø—Ç –ø—Ä–∏—Å—ã–ª–∞–µ—Ç –≤–∞–º –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã –∏ –ø—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è –ø—É—Ç–∏, —Ç–µ—Ä–º–æ—Å—Ç–∞—Ç –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è, –≤–∫–ª—é—á–∞–µ—Ç—Å—è —á–∞–π–Ω–∏–∫ –Ω–∞ –∫—É—Ö–Ω–µ, –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –∂–µ–ª–∞–µ—Ç  –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–≥–æ –¥–Ω—è

3. –í—ã –≥–æ–≤–æ—Ä–∏—Ç–µ "–∏—Ä–∏–Ω–∞ —Å–¥–µ–ª–∞–π —Å–≤–µ—Ç —è—Ä—á–µ"
>–ñ–∞–ª—é–∑–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è, –≤–∫–ª—é—á–∞–µ—Ç—Å—è —Å–≤–µ—Ç